<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, width=device-width">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

        <title>Techive {% block title %}{% endblock %}</title>
    </head>

    <body>

        <nav class="bg-light border navbar navbar-expand-md navbar-light">
            <div class="container-fluid">
                <div>
                    <img src="/static/images/brand.png" class="brand"/>
                    <a href="/" class="logo">Techive</a>
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    {% if session.get("user_id") %}
                    <div class="navbar-nav ms-auto ancLinks">
                        <a class="nav-link" aria-current="page" href="/create">Create</a>
                        <a class="nav-link" href="/allposts">All</a>
                        <a class="nav-link" href="/myposts">My Posts</a>
                        <a class="nav-link" href="/category">Categories</a>
                        <a class="nav-link" href="/creators">Creators</a>
                        <a class="nav-link" href="/logout">Logout</a>
                        <form action="/allposts" method="get" style="display: inline;" class="searchbox">
                            <input type="text" name="q" placeholder="Search posts..." autocomplete="off" required>
                            <button type="submit">Search</button>
                        </form>    
                        <a href="/progress"><i class="fa fa-user"></i></a>                    
                    </div>
                    {% else %}
                    <div class="navbar-nav ms-auto ancLinks">
                        <a class="nav-link" aria-current="page" href="/signup">Sign up</a>
                        <a class="nav-link" href="/login">Login</a>
                      </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </nav>

        <main class="container-fluid">
            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                <div>
                        {% for category, message in messages %}
                        <div class="alert alert-{{ category }}" role="alert">
                            {{ message }}
                        </div>
                        {% endfor %}
                </div>
                {% endif %}
            {% endwith %}
            {% block body %}{% endblock %}
        </main>

        <footer>
            {# {% if is_authenticated %} 
                <div>COMMENT! Put footer here</div>
                {% endif %}
            #}


            {% if not is_authenticated %} 
            <div class="joinus">
                <div>
                    <h2>Join our Tech <span class="community">Community</span> Today</h2>
                    <a href="/signup" class="btn btn-dark join">Click to Join</a>
                </div>
            </div>
            {% endif %}


            <div class="categorygrid">
                <div class="imgDiv">
                    <img src="/static/images/techivecategories.jpg" alt="Catgories of post">
                </div>
                <div class="textEl">
                    <p>300+ Post Categories</p>
                    <p>Techive provides a robust system that is easy to use and capable of sharing even the most complicated stories.</p>
                    <p>
                        <a href="/allposts">Check out our stories.</a>
                    </p>
                </div> 
            </div>

            <div class="categorygrid experience">
                <div class="textEl">
                    <p>A world-class sharing, reading, and listening experience</p>
                    <p>Techive's simple system lets you create, edit, detele and share your story as a developer with others.</p>
                    <p>
                        <a href="/creators">See other developers.</a>
                    </p>
                </div>
                <div class="imgDiv blueBgImg">
                    <img src="/static/images/bluebg.png" alt="Our experience">
                </div>
            </div>

            <div class="centr share">
                <div>
                    <p>"Joining Techive was the best decision of my life."</p>
                    <p>-- Paul Thomas, React Developer</p>
                    <p>
                        <a href="/create" class="startBtn">Share your Story</a>
                    </p>
                </div>
            </div>

            <div class="footer">
                <div class="grid">
                    <div>
                        <h5>Help</h5>
                        <div>
                            <a href="/progress">Help Center</a>
                            <a href="/progress">Help Forum</a>
                            <a href="/progress">Video Tutorials</a>
                            <a href="/progress">Contact Us</a>
                        </div>
                    </div>
                    <div>
                        <h5>Community</h5>
                        <div>
                            <a href="/progress">Blogger Buzz</a>
                            <a href="/progress">Tech News</a>
                            <a href="/progress">Tech Trends</a>
                        </div>
                    </div>
                    <div>
                        <h5>Developers</h5>
                        <div>
                            <a href="/progress">Blogger API</a>
                            <a href="/progress">Developer Forum</a>
                            <a href="/progress">GitHub</a>
                            <a href="/progress">LinkedIn</a>
                        </div>
                    </div>
                    <div>
                        <h4>Techive</h4>
                        <p class="about">Your go-to platform for sharing and exploring insightful tech content.
                            At Techive, we believe in the power of technology to transform lives, industries, and communities.
                            Our mission is to create a space where tech enthusiasts, professionals, and curious minds can connect, 
                            share ideas, and stay updated on the ever-evolving world of technology.
                        </p>
                        <a href="/progress" class="privacy">Terms of Privacy</a>

                    </div>
                </div>
            </div>
            
        </footer>
    </body>
</html>




{% extends "layout.html" %}


{% block title %}
    All Posts
{% endblock %}


{% block body %}
<div class="postsPage">
    <h3>POSTS</h3>
    {% for post in posts.items %}
    <div class="posts">
        <p class="creator">
            @{{ post.creator_name }}
        </p>
        <h6 class="postcategory">
            {{ post.category_name }}
        </h6>
        <h6 class="title">
            {{ post.title }}
        </h6>
        <p>
            {{ post.content }}
        </p>
        <p class="date">
            {{ post.date_posted.strftime("%Y-%m-%d %H:%M") }}
        </p>

    </div>
    {% endfor %}

    <div class="pagination">
        {% if posts.has_prev %}
            <a href="{{ url_for('allposts', page=posts.prev_num, q=request.args.get('q')) }}">Previous</a>
        {% endif %}
        {% if posts.has_next %}
            <a href="{{ url_for('allposts', page=posts.next_num, q=request.args.get('q')) }}">Next</a>
        {% endif %}
    </div>
</div>

{% endblock %}



{% extends "layout.html" %}


{% block title %}
    Category
{% endblock %}


{% block body %}
<div class="centr">
    <div class="centrr">
        <h3>View Posts by Category</h3>
        <form action="/category" method="post">
            <div>
                <select name="category">
                    <option disabled selected value="">Select</option>
                    {% for category in categories %}
                        <option value="{{ category.name }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="btn btn-info">View</button>
        </form>
    </div>
</div>
{% endblock %}



{% extends "layout.html" %}


{% block title %}
    All Posts
{% endblock %}


{% block body %}
<div class="postsPage">
    <h3>POSTS</h3>
    {% if not posts.items %}
        <p class="noposts">No posts available. Check back later!</p>
    {% endif %}

    {% for post in posts.items %}
    <div class="posts">
        <div>
            <img src="/static/images/personi.png"/>
        </div>
        <div>
            <div class="creatorDiv">
                <p class="creator">
                    @{{ post.creator_name }}
                </p>
                <p class="date">
                    {{ post.date_posted.strftime("%m/%d/%y, %I:%M %p") }}
                </p>
            </div>
            <h6 class="postcategory">
                {{ post.category_name }}
            </h6>
            <h6 class="title">
                {{ post.title }}
            </h6>
            <p>
                {{ post.content }}
            </p>
            <div>
                <div class="like_comment">
                    
                    <form method="POST" action="{{ url_for('like_post', post_id=post.id) }}">
                        {% if post.likes | liked_by_user(user_id) %}
                            <button type="submit" class="likebtn"><i class="fa-solid fa-heart"></i> {{ post.likes.count() }}</button>
                        {% else %}
                            <button type="submit" class="likebtn"><i class="fa-regular fa-heart"></i> {{ post.likes.count() }}</button>
                        {% endif %}
                    </form>           
                    
                    <button class="toggle-comments-btn" onclick="toggleComments('{{ post.id }}')">
                        <i class="fa fa-comment-dots"></i>
                    </button>
                </div>
                <div id="comments-{{ post.id }}" class="comments-section" style="display: none;">
                    <form method="POST" action="{{ url_for('comment_post', post_id=post.id) }}">
                        <textarea name="commentposted" required placeholder="Leave your thoughts here..."></textarea>
                        <button type="submit">Post</button>
                    </form>
                    <ul>
                        {% for comment in post.comments %}
                            <li>{{ comment.comment_content }} - {{ comment.user.username }}</li>
                        {% endfor %}
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
    {% endfor %}

    <div class="pagination">
        {% if posts.has_prev %}
            <a href="{{ url_for('allposts', page=posts.prev_num, q=request.args.get('q')) }}">Previous</a>
        {% endif %}
        {% if posts.has_next %}
            <a href="{{ url_for('allposts', page=posts.next_num, q=request.args.get('q')) }}">Next</a>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    // Function to toggle the visibility of the comments section
    function toggleComments(postId) {
        // postId = parseInt(postId); 
        const commentsSection = document.getElementById('comments-' + postId);
        if (commentsSection.style.display === 'none') {
            commentsSection.style.display = 'block';
        } else {
            commentsSection.style.display = 'none';
        }
    }
</script>
{% endblock %}


body, html {
    overflow-x: hidden;
}

body{
     /* background-color: #379777;
     background-color: #4aa492; 
     background-color: #5DB996;  */
    background-color: #0D7C66;
    color: #fff;
    font-family: 'Roboto', sans-serif;
    overflow: hidden
}

.container-fluid{
    padding: 0;
}

.brand{
    height: 50px;
    width: 50px;
    background-color: black;
    border-radius: 5px;
    margin: 0rem 0.3rem 0rem 2rem;
}

nav ul li{
    font-weight: bold;
}

nav ul li:nth-last-child(1), .logo{
    margin-right: 1rem;
}

.logoDiv{
    text-align: center;
    display: flex;
}

.logo{
    text-decoration: none;
    font-weight: bold;
    color: #EB5B00;
    font-size: 2rem;
}

.searchbox{
    margin: 10px 10px 0 0px;
}

i{
    margin-top: 1rem;
}

.searchbox button{
    background-color: #155E95;
    color: #fff;
    border: #fff;
    border-radius: 2px;
    padding: 4px 8px;
}
.searchbox button:hover{
    background-color: #124a74;
}

.ancLinks a:nth-last-child(1){
    margin-right: 2rem;
}

.ancLinks a{
    text-decoration: none;
    font-weight: bold;
    color: #123524;
}

.homebg{
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 120vh;
    width: 100vw;
    text-align: center;
    background-image: url(/static/images/homebgbig.jpg);
    background-size: cover;
    background-repeat: no-repeat;
    color: #fff;
    padding-top: 2rem;
    background-color: rgba(0, 0, 0, 0.6);
    font-weight: bold;
    position: relative; 
    z-index: 1;
}

.homebg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: -1;
    pointer-events: none;
}

.homebg .slogan{
    font-size: 3.5rem;
}

.homebg .startBtn, .startBtn{
    background-color: orangered;
    color: #fff;
    font-weight: bold;
    font-size: 14px;
    border: none;
    border-radius: 5px;
    padding: 0.8rem 2rem;
    text-decoration: none;
}

.homebg .startBtn:hover{
    background-color: transparent;
    border: 1px solid #fff;
}

.categorygrid{
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    justify-content: center;
    align-items: center;
    min-height: 90vh;
    text-align: center;
    background-color: #ebb951;
    color: #111;
}

.categorygrid .imgDiv{
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.categorygrid img{
    width: 80%;
    height: 50%;
    border-radius: 2px;
}

.categorygrid .textEl p:nth-child(1){
    font-size: 2.8rem;
    color: #000000;
}

.categorygrid .textEl p:nth-child(2){
    font-size: 1.5rem;
    color: #fff;
    text-align: center;
    padding: 0rem 3rem;
}

.categorygrid .textEl p:nth-child(3) a{
    font-size: 1.5rem;
    color: #000000;
    text-align: center;
    padding: 0rem 3rem;
    text-decoration: none;
}

.categorygrid .textEl p:nth-child(3) a:hover{
    color: #343131;
}

.experience{
    background-color: #009990;
}

.experience img{
    border-radius: 5px;
}

.signupFlex{
    display: grid;
    grid-template-columns: 30% 40%;
    height: 100vh;
}

.signupLeftDiv {
    position: relative;
    background-color: #111;
    margin-right: 2rem;
    padding-top: 3rem;
}

.signupLeftDiv p{
    color: #fff;
    margin-left: 1rem;
    color: #fff;
}

.signupRightDiv {
    margin-left: 3rem;
    margin-top: 5rem;
}

.signupRightDiv form{
    margin-top: 3rem;
}

.centr{
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    text-align: center;
    background-color: #5DB996;
    color: #fff;
}

.centrr{
    background-color: #46846c;
    box-shadow: 0px 0px 20px 0px #333;
    padding: 5rem 10rem;
    border-radius: 10px;
}

.categoryDivEl{
    margin: 5rem 10rem;
}

.centr button{
    margin-top: 1rem;
}

.centr .btnCategory{
    margin-left: 1rem;
}

.share{
    min-height: 70vh;
    background-color: #fff;
    color: #111;
}

.share p:nth-child(1){
    font-size: 3rem;
}

.postFlex{
    display: block;
    justify-content: center;
    align-items: center;
    gap: 2em;
}
.postsPage{
    color: #111;
    min-height: 90vh;
}

.postsPage{
    margin: 4rem 5rem;
}

.fab{
    background-color: #009990;
}

.category{
    color: #111;
    min-height: 90vh;
    border-radius: 5px;
    padding: 0.5rem 1rem 0.2rem 1rem;
    background-color: #009990;
    padding: 4rem 5rem;

}

.category h4{
    margin: 1rem 0rem;
    font-size: 1rem;
    color: rgb(79, 77, 77);
}

.noposts{
    text-align: center;
    color: #fff;
    font-size: 1.6rem;
    margin-top: 3rem;
}

.postsPage h3{
    text-align: center;
    color: #fff;
    margin-bottom: 1.5rem;
    font-weight: bold;
    font-size: 1rem;
}

.posts{
    background-color: #D9DFC6;
    margin-top: 1rem;
    border-radius: 5px;
    padding: 1rem 1rem 0.5rem 1rem;
    display: grid;
    grid-template-columns: 10% 90%;
}

.posts .title {
    font-size: 12px;
    margin-top: -0.5rem;
    font-style: italic;
}
.posts .postcategory {
    font-size: 14px;
    margin-top: -0.5rem;
}

.posts .creator {
    color: rgb(225, 60, 0);
    font-size: 15px;
    font-weight: bold;
}
.posts .date {
    color: #EB5B00;
    font-size: 10px;
}

.posts .creatorDiv, .like_comment{
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 0.5rem;
}
.posts .allcreator{
    display: flex;
    justify-content: flex-start;
    align-items: center;
    margin-top: 2rem;
    gap: 0.5rem;
    cursor: pointer;
}
.like_comment{
    gap: 2rem;
}
.likebtn{
    /* background-color: red; */
    border: none;
    cursor: pointer;
    /* display: inline-flex; */
    align-items: center;
    justify-content: center;
    padding: 0;
    background: none;
}

.likebtn i{
    pointer-events: none;
    border: none;
}

.fa-solid{
    color: red;
}

.text-orange{
    color: #EB5B00;
    margin-top: -1rem;
}

.highlight {
    color: #FF5733;
    font-weight: bold;
}

.you-tag {
    color: #007BFF;
    font-size: 0.9rem; 
    margin-left: 10px; 
    font-style: italic; 
}

.editEl{
    background-color: #FF8225;
    box-shadow: 0px 0px 10px 0px #f1781c;
}

.editEl h3{
    margin-bottom: 2rem;
}

.editEl input, textarea{
    text-align: center;
    min-width: 300px;
    max-width: 300px;
    padding: 10px;
    border: none;
    border-radius: 5px;
}

.editEl textarea{
    min-height: 100px;
    max-height: 100px;
}


.community{
    color: #b04604;
}

.joinus{
    background-color: #009990;
    height: 350px;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    padding-top: 2rem;
}
.progress{
    background-color: #1d2b34;
    min-height: 100vh;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    padding-top: 2rem;
}

.progress h2{
    margin-bottom: 1rem;
}

.join{
margin: 1rem;
}

.footer{
    background-color: #1d2b34;
    min-height: 500px;
}

.grid{
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(14rem, 1fr));
    justify-content: center;
    padding: 2rem 4rem;
    gap: 1rem;
}

.grid h5{
    padding: 5rem 0rem 1rem 0rem;
}

.grid h4{
    margin: 2rem 0rem 1rem 0rem;
    color: #b04604;
}

.grid a{
    text-decoration: none;
    color: rgb(206, 200, 200);
    display: block;
    margin-top: 10px;
}

.grid a:hover{
    text-decoration: underline;
    color: #fff;
}

.about{
    color: rgb(228, 211, 211);
}

.grid .privacy{
    text-decoration: underline;
    color:  rgb(228, 211, 211);
}

.pagination a{
    color: #fff;
    margin-top: 1rem;
    letter-spacing: 5px;
    font-weight: bold;
    margin-left: 5px;
}

.comments-section ul li {
    margin-bottom: 5px;
    word-wrap: break-word;
}

.comments-section form, .comments-section div{
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 1rem;
    margin: 0.5rem 0rem;
}

.comments-section textarea{
    min-height: 40px;
    max-height: 40px;
    text-align: center;
    min-width: 220px;
    max-width: 220px;
    padding: 10px;
    border: none;
    border-radius: 5px;
    resize: none;
    font-size: 12px;
    outline: none;
}

.toggle-comments-btn{
    background-color: transparent;
    border: none;
}

.comments-section button{
    background-color: #333;
    padding: 0.4rem 1rem;
    color: #fff;
    border: none;
    border-radius: 5px;

}




/* MEDIA  */
@media (max-width: 480px) {
    
}